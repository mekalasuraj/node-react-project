{"version":3,"sources":["components/students/login.js","../../lib/atob.js","../../lib/base64_url_decode.js","../../lib/index.js"],"names":["Login","props","useState","email","password","formData","setFormData","showError","setError","onSTudentsDetailsCahnge","e","target","name","value","className","onSubmit","preventDefault","axios","post","then","response","data","message","decoded","jwt_decode","token","console","log","sessionStorage","setItem","JSON","stringify","window","location","href","htmlFor","type","id","onChange","required","pattern","title","style","textDecoration","InvalidCharacterError","this","prototype","Error","atob","bind","input","str","String","replace","length","bs","buffer","bc","idx","output","charAt","fromCharCode","indexOf","decodeURIComponent","m","p","code","charCodeAt","toString","toUpperCase","err","InvalidTokenError","options","pos","header","parse","base64_url_decode","split"],"mappings":"4KA8EeA,UA1ED,SAACC,GACX,MAAgCC,mBAAS,CACrCC,MAAO,GACPC,SAAU,KAFd,mBAAOC,EAAP,KAAiBC,EAAjB,KAIE,EAA8BJ,oBAAS,GAAvC,mBAAOK,EAAP,KAAkBC,EAAlB,KAGIC,EAAwB,SAACC,GAC3BJ,EAAY,2BAAKD,GAAN,kBAAiBK,EAAEC,OAAOC,KAAOF,EAAEC,OAAOE,UAyB3D,OACE,8BAEC,qBAAKC,UAAU,SAAf,SACI,sBAAKA,UAAU,MAAf,UACI,qBAAKA,UAAU,UACf,sBAAKA,UAAU,QAAf,UACI,oBAAIA,UAAU,wBAAd,mBAEIP,GACC,qBAAKO,UAAU,eAAf,iCAGT,uBAAMC,SAnCW,SAACL,GACvBA,EAAEM,iBAEHC,IAAMC,KAAK,0BAA0Bb,GACpCc,MAAK,SAAAC,GAKF,GAA6B,iBAA1BA,EAASC,KAAKC,QAA2B,CAC3C,IAAIC,EAAUC,YAAWJ,EAASC,KAAKI,OACvCC,QAAQC,IAAIJ,GACTjB,EAAY,CAACH,MAAO,GAAGC,SAAU,KACjCwB,eAAeC,QAAQ,OAAOC,KAAKC,UAAUR,IAC7CK,eAAeC,QAAQ,QAAQT,EAASC,KAAKI,OAC7CO,OAAOC,SAASC,KAAK,iBACW,eAA1Bd,EAASC,KAAKC,SACvBd,GAAS,OAkBR,UACO,sBAAKM,UAAU,eAAf,UACA,uBAAOA,UAAU,aAAaqB,QAAQ,YAAtC,mBACI,uBAAOC,KAAK,QAAQC,GAAG,YAAYzB,KAAK,QAAQC,MAAOR,EAASF,MAAOmC,SAAU7B,EAAyBK,UAAU,eAAeyB,UAAQ,OAI/I,sBAAKzB,UAAU,oBAAf,UACA,uBAAOA,UAAU,aAAaqB,QAAQ,eAAtC,sBACI,uBAAOC,KAAK,WAAWI,QAAQ,QAAQC,MAAM,uBAAuBJ,GAAG,eAAezB,KAAK,WAAWC,MAAOR,EAASD,SAAUkC,SAAU7B,EAAyBK,UAAU,eAAeyB,UAAQ,OAG5M,wBAAQH,KAAK,SAAStB,UAAU,iCAAhC,wBAEA,mBAAGoB,KAAK,YAAYpB,UAAU,OAAO4B,MAAO,CAACC,eAAe,aAA5D,yBAEH,qBAAK7B,UAAU,mB,gCC5D5B,SAAS8B,EAAsBtB,GAC3BuB,KAAKvB,QAAUA,EAGnBsB,EAAsBE,UAAY,IAAIC,MACtCH,EAAsBE,UAAUlC,KAAO,wBA6BvC,MAAkC,oBAAXoB,QACnBA,OAAOgB,MACPhB,OAAOgB,KAAKC,KAAKjB,SA7BrB,SAAkBkB,GACd,IAAIC,EAAMC,OAAOF,GAAOG,QAAQ,MAAO,IACvC,GAAIF,EAAIG,OAAS,GAAK,EAClB,MAAM,IAAIV,EACN,qEAGR,IAEI,IAAYW,EAAIC,EAAZC,EAAK,EAAeC,EAAM,EAAGC,EAAS,GAEzCH,EAASL,EAAIS,OAAOF,MAEpBF,IACCD,EAAKE,EAAK,EAAS,GAALF,EAAUC,EAASA,EAG/BC,IAAO,GACVE,GAAUP,OAAOS,aAAa,IAAON,KAAS,EAAIE,EAAM,IACzD,EAGAD,EA/BI,oEA+BWM,QAAQN,GAE3B,OAAOG,GCxBI,WAASR,GACpB,IAAIQ,EAASR,EAAIE,QAAQ,KAAM,KAAKA,QAAQ,KAAM,KAClD,OAAQM,EAAOL,OAAS,GACpB,KAAK,EACD,MACJ,KAAK,EACDK,GAAU,KACV,MACJ,KAAK,EACDA,GAAU,IACV,MACJ,QACI,KAAM,4BAGd,IACI,OA5BR,SAA0BR,GACtB,OAAOY,mBACHf,EAAKG,GAAKE,QAAQ,QAAQ,SAASW,EAAGC,GAClC,IAAIC,EAAOD,EAAEE,WAAW,GAAGC,SAAS,IAAIC,cAIxC,OAHIH,EAAKZ,OAAS,IACdY,EAAO,IAAMA,GAEV,IAAMA,MAPzB,CA4BgCP,GAC1B,MAAOW,GACL,OAAOtB,EAAKW,IC5Bb,SAASY,EAAkBjD,GAC9BuB,KAAKvB,QAAUA,EAGnBiD,EAAkBzB,UAAY,IAAIC,MAClCwB,EAAkBzB,UAAUlC,KAAO,wBAEpB,SAASa,EAAO+C,GAC3B,GAAqB,iBAAV/C,EACP,MAAM,IAAI8C,EAAkB,2BAIhC,IAAIE,QADJD,EAAUA,GAAW,IACHE,OAAkB,EAAI,EACxC,IACI,OAAO5C,KAAK6C,MAAMC,EAAkBnD,EAAMoD,MAAM,KAAKJ,KACvD,MAAO/D,GACL,MAAM,IAAI6D,EAAkB,4BAA8B7D,EAAEY","file":"static/js/5.e2657019.chunk.js","sourcesContent":["import React, {useEffect,useState} from 'react';\nimport axios from 'axios';\nimport jwt_decode from \"jwt-decode\";\n\nconst Login = (props) => {\n    const [formData, setFormData] = useState({\n        email: '',\n        password: ''\n      });\n      const [showError, setError] = useState(false);\n\n      \n    const onSTudentsDetailsCahnge=(e)=>{\n        setFormData({ ...formData, [e.target.name]: e.target.value });\n    }\n\n    const onLoginFormSubmit = (e) => {\n        e.preventDefault();\n    \n       axios.post('/api/users/auth/student',formData)\n       .then(response=>{\n        \n        \n\n         \n           if(response.data.message === \"record_found\"){\n            var decoded = jwt_decode(response.data.token);\n            console.log(decoded);    \n               setFormData({email: '',password: ''});\n               sessionStorage.setItem('user',JSON.stringify(decoded))\n               sessionStorage.setItem('token',response.data.token)\n               window.location.href='/dashboard';\n           } else if(response.data.message === \"No_Matches\"){\n            setError(true);\n           }\n       })\n      };\n\n  return (\n    <div>\n     \n     <div className=\"col-12\">\n         <div className=\"row\">\n             <div className=\"col-4\"></div>\n             <div className=\"col-4\">\n                 <h3 className=\"text-center mt-5 mb-5\">Login</h3>\n                 {\n                     showError &&\n                     (<div className=\"err_msg mb-4\">Invalid Credentials</div>)\n                 }\n                 \n             <form onSubmit={onLoginFormSubmit}> \n                    <div className=\"form-outline\">\n                    <label className=\"form-label\" htmlFor=\"typeEmail\">Email</label>\n                        <input type=\"email\" id=\"typeEmail\" name=\"email\" value={formData.email} onChange={onSTudentsDetailsCahnge} className=\"form-control\" required/>\n                        \n                    </div>\n\n                    <div className=\"form-outline mb-4\">\n                    <label className=\"form-label\" htmlFor=\"typePassword\">Password</label>\n                        <input type=\"password\" pattern=\".{5,}\" title=\"5 characters minimum\" id=\"typePassword\" name=\"password\" value={formData.password} onChange={onSTudentsDetailsCahnge} className=\"form-control\" required/>\n                    </div>\n            \n                <button type=\"submit\" className=\"btn btn-primary btn-block mb-3\">Sign In</button>\n            </form>\n                <a href='/register' className=\"mt-3\" style={{textDecoration:'underline'}}>Register</a>\n             </div>\n             <div className=\"col-4\"></div>\n         </div>\n     \n     </div>\n     \n    </div>\n  );\n};\n\n\n\nexport default Login;\n\n","/**\n * The code was extracted from:\n * https://github.com/davidchambers/Base64.js\n */\n\nvar chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n\nfunction InvalidCharacterError(message) {\n    this.message = message;\n}\n\nInvalidCharacterError.prototype = new Error();\nInvalidCharacterError.prototype.name = \"InvalidCharacterError\";\n\nfunction polyfill(input) {\n    var str = String(input).replace(/=+$/, \"\");\n    if (str.length % 4 == 1) {\n        throw new InvalidCharacterError(\n            \"'atob' failed: The string to be decoded is not correctly encoded.\"\n        );\n    }\n    for (\n        // initialize result and counters\n        var bc = 0, bs, buffer, idx = 0, output = \"\";\n        // get next character\n        (buffer = str.charAt(idx++));\n        // character found in table? initialize bit storage and add its ascii value;\n        ~buffer &&\n        ((bs = bc % 4 ? bs * 64 + buffer : buffer),\n            // and if not first of each 4 characters,\n            // convert the first 8 bits to one ascii character\n            bc++ % 4) ?\n        (output += String.fromCharCode(255 & (bs >> ((-2 * bc) & 6)))) :\n        0\n    ) {\n        // try to find character in table (0-63, not found => -1)\n        buffer = chars.indexOf(buffer);\n    }\n    return output;\n}\n\nexport default (typeof window !== \"undefined\" &&\n    window.atob &&\n    window.atob.bind(window)) ||\npolyfill;","import atob from \"./atob\";\n\nfunction b64DecodeUnicode(str) {\n    return decodeURIComponent(\n        atob(str).replace(/(.)/g, function(m, p) {\n            var code = p.charCodeAt(0).toString(16).toUpperCase();\n            if (code.length < 2) {\n                code = \"0\" + code;\n            }\n            return \"%\" + code;\n        })\n    );\n}\n\nexport default function(str) {\n    var output = str.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    switch (output.length % 4) {\n        case 0:\n            break;\n        case 2:\n            output += \"==\";\n            break;\n        case 3:\n            output += \"=\";\n            break;\n        default:\n            throw \"Illegal base64url string!\";\n    }\n\n    try {\n        return b64DecodeUnicode(output);\n    } catch (err) {\n        return atob(output);\n    }\n}","\"use strict\";\n\nimport base64_url_decode from \"./base64_url_decode\";\n\nexport function InvalidTokenError(message) {\n    this.message = message;\n}\n\nInvalidTokenError.prototype = new Error();\nInvalidTokenError.prototype.name = \"InvalidTokenError\";\n\nexport default function(token, options) {\n    if (typeof token !== \"string\") {\n        throw new InvalidTokenError(\"Invalid token specified\");\n    }\n\n    options = options || {};\n    var pos = options.header === true ? 0 : 1;\n    try {\n        return JSON.parse(base64_url_decode(token.split(\".\")[pos]));\n    } catch (e) {\n        throw new InvalidTokenError(\"Invalid token specified: \" + e.message);\n    }\n}"],"sourceRoot":""}